\documentclass[11pt,a4paper,oneside]{report}

\usepackage[top=30mm, bottom=25mm, left=30mm, right=38mm]{geometry}

% Text and fonts
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{parskip}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{wasysym}
\usepackage{marvosym}
\usepackage{palatino}

% Add capitalisation to autoref names to follow writing style guide
\addto\extrasenglish{
  \def\chapterautorefname{Chapter}
  \def\sectionautorefname{Section}
  \def\subsectionautorefname{Section}
  \def\subsubsectionautorefname{Section}
  \def\itemautorefname{Item}
  \def\paragraphautorefname{Paragraph}
  \def\footnoteautorefname{Footnote}
  \def\pageautorefname{Page}
}

% Figures & Tables
\usepackage{float}
\usepackage{graphicx}
\usepackage[dvipsnames,table]{xcolor}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{booktabs}
\usepackage{tablefootnote}

% Refs and links
\usepackage{xurl}
\usepackage[linktocpage=true]{hyperref}
\usepackage[nameinlink]{cleveref}
\usepackage[nottoc,numbib]{tocbibind}
\usepackage{biblatex}
\addbibresource{references.bib}

\hypersetup{
    colorlinks=true,
    linkcolor=red,
    citecolor=red,
    urlcolor=RoyalPurple
}

% Misc
\usepackage{fancyhdr}
\usepackage{enumitem}
\usepackage{minted}
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage[detect-all]{siunitx}
\usepackage{changepage}

\usepackage{todonotes}

\setlength{\marginparwidth}{2cm}

% Set up page headers and footers
\setlength{\headheight}{14.5pt}

\fancypagestyle{contents}{
    \fancyhead[L]{\nouppercase{\leftmark}}
    \fancyhead[R]{}
}

\fancypagestyle{body}{
    \fancyhead[L]{\nouppercase{\leftmark}}
    \fancyhead[R]{\nouppercase{\rightmark}}
}

\fancypagestyle{appendix}{
    \fancyhead[L]{\nouppercase{\leftmark}}
    \fancyhead[R]{}
}
% Custom header formatting
% \pagestyle{fancy}
% \fancyhf{}
% \fancyhead[LE,RO]{\nouppercase{\leftmark}}
% \fancyhead[RE,LO]{\nouppercase{\rightmark}}
% \fancyfoot[C]{\thepage}

% Redefine marks to remove uppercase
\titleformat{\chapter}[hang]{\huge\bfseries}{\thechapter \, |\,}{2pc}{}
\titleformat{\section}[hang]{\Large\bfseries}{\thesection}{1pc}{}
\titleformat{\subsection}[hang]{\large\bfseries}{\thesubsection}{1pc}{}

% Patch \chaptermark and \sectionmark to avoid uppercase
\makeatletter
\patchcmd{\chaptermark}{\MakeUppercase}{}{}{}
\patchcmd{\sectionmark}{\MakeUppercase}{}{}{}
\makeatother

\counterwithin{listing}{chapter}

\definecolor{codebg}{gray}{0.95}
\setminted{%
    breaklines,
    bgcolor=codebg,
    fontsize=\scriptsize
}

\sisetup{group-separator={,},group-minimum-digits={3},output-decimal-marker={.}}

\hyphenation{analysis}

\newenvironment{compactitemize}
    {\vspace{-\topsep}\begin{itemize}[leftmargin=*,topsep=0pt,noitemsep]}
    {\end{itemize}\vspace{-\topsep}}

\interfootnotelinepenalty=10000

% User-defined commands
\newcommand{\X}{X}
\newcommand{\V}{V}

%%
%% CONTENT
%%

\begin{document}

% Add your title, used in parts of the document
% This is used for both types of document (thesis, report)
\newcommand{\theprojecttitle}{The Title}

% Cover page (choose one, comment out the other)
\include{cover-thesis} % MSc or BSc thesis 
\include{cover-report} % internship, SPP, etc.

% Abstract (for theses only)
\newpage
\begin{abstract}
    Your abstract goes here.
\end{abstract}

% Table of Contents
\tableofcontents
\newpage

% List of Figures
\listoffigures
\newpage

% List of Tables
\listoftables
\newpage

% Chapters
\include{content}

% Bibliography
\printbibliography[heading=bibintoc,title={References}]

% Appendices (comment out if not needed)
\appendix
\include{appendices}

\end{document}
